<!DOCTYPE html>
<html>
<head>
  <title>Show My Location</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #f9f9f9;
      margin: 0;
      padding: 0;
    }
    header {
      background: #4285F4;
      color: white;
      padding: 15px;
      font-size: 24px;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 18px;
      border: none;
      background: #4285F4;
      color: white;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover {
      background: #3367D6;
    }
    #coordinates, #address {
      font-size: 18px;
      margin-top: 10px;
      color: #333;
    }
    #map {
      width: 90%;
      height: 500px;
      margin: 20px auto;
      border-radius: 12px;
      border: 2px solid #ccc;
    }
  </style>
</head>
<body>
  <header>Find Your Location</header>
  <p>Click the button to show your exact location:</p>
  <button onclick="getLocation()">Show My Location</button>
  <p id="coordinates">Waiting for location...</p>
  <p id="address"></p>
  <div id="map"></div>

  <script>
    let map;
    let marker;
    let geocoder;

    function initMap(lat = 20, lng = 0) {
      map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: lat, lng: lng },
        zoom: 3,
      });
      geocoder = new google.maps.Geocoder();
    }

    function getLocation() {
      const coordsText = document.getElementById("coordinates");
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
      } else {
        coordsText.textContent = "Geolocation is not supported by this browser.";
      }
    }

    function showPosition(position) {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;

      // Display coordinates
      document.getElementById("coordinates").textContent =
        `Latitude: ${lat.toFixed(6)}, Longitude: ${lon.toFixed(6)}`;

      // Update map and marker
      const userLocation = { lat: lat, lng: lon };
      map.setCenter(userLocation);
      map.setZoom(15);

      if (marker) {
        marker.setMap(null);
      }
      marker = new google.maps.Marker({
        position: userLocation,
        map: map,
        title: "You are here!",
      });

      // Reverse geocode to get address
      geocoder.geocode({ location: userLocation }, (results, status) => {
        if (status === "OK") {
          if (results[0]) {
            document.getElementById("address").textContent = `Address: ${results[0].formatted_address}`;
          } else {
            document.getElementById("address").textContent = "No address found";
          }
        } else {
          document.getElementById("address").textContent = "Geocoder failed: " + status;
        }
      });
    }

    function showError(error) {
      const coordsText = document.getElementById("coordinates");
      const addressText = document.getElementById("address");
      switch(error.code) {
        case error.PERMISSION_DENIED:
          coordsText.textContent = "User denied the request for Geolocation.";
          addressText.textContent = "";
          break;
        case error.POSITION_UNAVAILABLE:
          coordsText.textContent = "Location information is unavailable.";
          addressText.textContent = "";
          break;
        case error.TIMEOUT:
          coordsText.textContent = "The request to get user location timed out.";
          addressText.textContent = "";
          break;
        case error.UNKNOWN_ERROR:
          coordsText.textContent = "An unknown error occurred.";
          addressText.textContent = "";
          break;
      }
    }
  </script>

  <!-- Load Google Maps API -->
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap">
  </script>
</body>
</html>
